To modify the utility so that it returns a non-zero exit code when the images are different, you can use the `sys.exit()` function to exit the script with an appropriate exit code. Here's the updated script:

```python
import argparse
from PIL import Image
import numpy as np
import sys

def image_diff(image1, image2, output_path):
    # Open the images
    img1 = Image.open(image1)
    img2 = Image.open(image2)

    # Ensure images have the same size
    if img1.size != img2.size:
        raise ValueError("Images must have the same dimensions for comparison.")

    # Convert images to NumPy arrays
    np_img1 = np.array(img1)
    np_img2 = np.array(img2)

    # Compute the absolute difference between the images
    diff = np.abs(np_img1 - np_img2)

    # Sum the differences to get a single value representing the difference
    total_diff = np.sum(diff)

    # Save the difference image
    diff_img = Image.fromarray(diff.astype(np.uint8))
    diff_img.save(output_path)

    return total_diff

def main():
    parser = argparse.ArgumentParser(description="Compare two screenshots.")
    parser.add_argument("image1", help="Path to the first image")
    parser.add_argument("image2", help="Path to the second image")
    parser.add_argument("output", help="Path to save the difference image")
    
    args = parser.parse_args()
    
    try:
        difference = image_diff(args.image1, args.image2, args.output)
        print(f"Total pixel difference: {difference}")
        
        # Exit with a non-zero code if images are different
        if difference > 0:
            sys.exit(1)
    except Exception as e:
        print(f"Error: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()
```

In this updated script, if the total pixel difference (`difference`) between the two images is greater than 0, the script exits with a non-zero exit code (1). Otherwise, it exits with a zero exit code (indicating that the images are the same). This allows you to check the exit code to determine whether the images are different or not when running the utility from the command line.
